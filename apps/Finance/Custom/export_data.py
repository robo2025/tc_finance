import timefrom apps.Finance.order_model import RESPONSIBLE_PARTY,REFUND_TYPEfrom apps.Finance.models import REFUND_CUSTOM_STATUS,STATEMENT_STATUSexport_rule={    "PriceruleViewSet":{        "1==1":[{                    'field': 'rulecode',                    'field_name': '结算规则单号',                },                {                    'field': 'supplier_name',                    'field_name': '供应商',                },                {                    'field': 'goods_name',                    'field_name': '商品名称',                },                {                    'field': 'goods_model',                    'field_name': '型号',                },                {                    'field': 'rate',                    'field_name': '佣金比率',                },                {                    'field': 'start_date',                    'field_name': '生效日期',                },                {                    'field': 'end_date',                    'field_name': '失效日期',                },        ],    },    "RefundOrderViewSet":{        "cancel_status==1":[{                    'field': 'son_order_sn',                    'field_name': '订单号',                },                {                    'field': 'supplier_name',                    'field_name': '供应商名称',                },                {                    'field': 'guest_company_name',                    'field_name': '客户名称',                },                {                    'field': 'order_date',                    'field_name': '订单日期',                    'func':lambda x : time.strftime("%Y-%m-%d %H:%M:%S",time.localtime(x)),                },                {                    'field': 'trade_cancel_date',                    'field_name': '交易取消时间',                    'func':lambda x : time.strftime("%Y-%m-%d %H:%M:%S",time.localtime(x)),                },                {                    'field': 'trade_cancel_remark',                    'field_name': '交易取消说明',                    'func': lambda x: [ item[1] for item in REFUND_TYPE if int(x)==item[0]][0]                },                {                    'field': 'trade_cancel_name',                    'field_name': '责任方',                    'func': lambda x: [ item[1] for item in RESPONSIBLE_PARTY if int(x)==item[0]][0]                },                {                    'field': 'trade_amount',                    'field_name': '交易金额',                },                {                    'field': 'trade_cancel_amount',                    'field_name': '应退款金额',                },                {                    'field': 'cancel_status',                    'field_name': '状态',                    'func': lambda x: [ item[1] for item in REFUND_CUSTOM_STATUS if int(x)==item[0]][0],                },                {                    'field': 'refund_sn',                    'field_name': '退款单号',                },        ],        "cancel_status==2":[{                    'field': 'son_order_sn',                    'field_name': '订单号',                },                {                    'field': 'supplier_name',                    'field_name': '供应商名称',                },                {                    'field': 'guest_company_name',                    'field_name': '客户名称',                },                {                    'field': 'order_date',                    'field_name': '订单日期',                    'func': lambda x: time.strftime("%Y-%m-%d %H:%M:%S", time.localtime(x)),                },                {                    'field': 'trade_cancel_date',                    'field_name': '交易取消时间',                    'func': lambda x: time.strftime("%Y-%m-%d %H:%M:%S", time.localtime(x)),                },                {                    'field': 'trade_cancel_remark',                    'field_name': '交易取消说明',                    'func': lambda x: [ item[1] for item in REFUND_TYPE if int(x)==item[0]][0]                },                {                    'field': 'trade_cancel_name',                    'field_name': '责任方',                    'func': lambda x: [ item[1] for item in RESPONSIBLE_PARTY if int(x)==item[0]][0]                },                {                    'field': 'trade_amount',                    'field_name': '交易金额',                },                {                    'field': 'trade_cancel_amount',                    'field_name': '应退款金额',                },                {                    'field': 'cancel_status',                    'field_name': '状态',                    'func': lambda x: [ item[1] for item in REFUND_CUSTOM_STATUS if int(x)==item[0]][0],                },                {                    'field': 'refund_sn',                    'field_name': '退款单号',                },                {                    'field': 'pay_time',                    'field_name': '处理时间',                    'func': lambda x: time.strftime("%Y-%m-%d %H:%M:%S", time.localtime(x)),                },        ],    },    "StatementViewset":{        "self.action=='retrieve'":{            "title":[                {                    'field': 'code',                    'field_name': '对账单单号',                },                {                    'field': 'month',                    'field_name': '对账月份',                },                {                    'field': 'supplier_name',                    'field_name': '对账对象',                },                {                    'field': 'cycle',                    'field_name': '对账周期',                },                {                    'field': 'status',                    'field_name': '对账状态',                    'func': lambda x: [item[1] for item in STATEMENT_STATUS if int(x) == item[0]][0]                },                {                    'field': 'commission_total',                    'field_name': '佣金合计',                },                {                    'field': 'goods_total',                    'field_name': '货款合计',                },            ],            "detail":[                {                    'field': 'date',                    'field_name': '单据日期',                },                {                    'field': 'typename',                    'field_name': '单据类型',                },                {                    'field': 'order_code',                    'field_name': '商品订单号',                },                {                    'field': 'goods_name',                    'field_name': '商品名称',                },                {                    'field': 'model',                    'field_name': '型号',                },                {                    'field': 'price',                    'field_name': '单价',                },                {                    'field': 'number',                    'field_name': '数量',                },                {                    'field': 'amount',                    'field_name': '货款',                },                {                    'field': 'commission',                    'field_name': '佣金',                },            ],        }    },    "TicketViewset":{        "is_type==1":[            {                'field': 'guest_company_name',                'field_name': '客户名称',            },            {                'field': 'title',                'field_name': '开票抬头',            },            {                'field': 'tax_number',                'field_name': '发票号码',            },            {                'field': 'date',                'field_name': '单据日期',            },            {                'field': 'type',                'field_name': '单据类型',            },            {                'field': 'order_code',                'field_name': '订单号',            },            {                'field': 'goods_name',                'field_name': '商品名称',            },            {                'field': 'model',                'field_name': '型号',            },            {                'field': 'price',                'field_name': '单价',            },            {                'field': 'number',                'field_name': '数量',            },            {                'field': 'amount',                'field_name': '货款',            },            {                'field': 'ticket_amount',                'field_name': '可开票',            },            {                'field': 'ticket_tot',                'field_name': '累计开票',            },        ],        "is_type==2":[            {                'field': 'guest_company_name',                'field_name': '客户名称',            },            {                'field': 'receipt_no',                'field_name': '发票号码',            },            {                'field': 'receipt_sn',                'field_name': '发票编号',            },            {                'field': 'order_time',                'field_name': '发票日期',            },            {                'field': 'receipt_type',                'field_name': '发票类型',            },            {                'field': 'order_type',                'field_name': '单据类型',            },            {                'field': 'order_code',                'field_name': '订单号',            },        ],    },    "TranListViewset":{        "self.action=='pay'":[            {                'field': 'operation_type',                'field_name': '业务类型',            },            {                'field': 'trade_type',                'field_name': '交易类型',            },            {                'field': 're_no',                'field_name': '收款单号',            },            {                'field': 'guest_company_name',                'field_name': '	交易对象',            },            {                'field': 'order_no',                'field_name': '订单号',            },            {                'field': 'pay_amount',                'field_name': '	收款金额',            },            {                'field': 'card_type',                'field_name': '支付卡类型',            },            {                'field': "unionpayrecords.unionpay_card",                'field_name': '支付银行账号',            },            {                'field': "unionpayrecords.merchant_id",                'field_name': '银行收款流水号',            },            {                'field': 'pay_type',                'field_name': '支付类型',            },            {                'field': 'pay_method',                'field_name': '支付类型',            },            {                'field': 'pay_status',                'field_name': '支付状态',            },            {                'field': 'txn_time',                'field_name': '支付发起时间',                'func':lambda x : time.strftime("%Y-%m-%d %H:%M:%S",time.localtime(x))            },            {                'field': 'pay_time',                'field_name': '银行收款到账时间',                'func':lambda x : time.strftime("%Y-%m-%d %H:%M:%S",time.localtime(x))            },            {                'field': 'undefined',                'field_name': '银行清算到账时间',            },        ],        "self.action=='refund'": [            {                'field': 'operation_type',                'field_name': '业务类型',            },            {                'field': 'trade_type',                'field_name': '交易类型',            },            {                'field': 're_no',                'field_name': '收款单号',            },            {                'field': 'pay_no',                'field_name': '付款单号',            },            {                'field': 'guest_company_name',                'field_name': '	交易对象',            },            {                'field': 'link_order_sn',                'field_name': '	关联订单号',            },            {                'field': 'order_no',                'field_name': '订单号',            },            {                'field': 'pay_amount',                'field_name': '付款金额',            },            {                'field': 'card_type',                'field_name': '支付卡类型',            },            {                'field': "unionpayrecords.unionpay_card",                'field_name': '收款银行账号',            },            {                'field': "transaction_id",                'field_name': '银行付款流水号',            },            {                'field': 'pay_type',                'field_name': '支付类型',            },            {                'field': 'pay_status',                'field_name': '支付状态',            },            {                'field': 'txn_time',                'field_name': '支付发起时间',                'func': lambda x: time.strftime("%Y-%m-%d %H:%M:%S", time.localtime(x))            },            {                'field': 'pay_time',                'field_name': '银行收款到账时间',                'func': lambda x: time.strftime("%Y-%m-%d %H:%M:%S", time.localtime(x))            },        ],    },    "StatementSupDetaiExlViewset":{        "self.action=='statement'":[            {                'field': 'limit',                'field_name': '对账月份',            },            {                'field': 'term',                'field_name': '对账周期',            },            {                'field': 'code',                'field_name': '对账单单号',            },            {                'field': 'order_date',                'field_name': '单据日期',            },            {                'field': 'type',                'field_name': '单据类型',            },            {                'field': 'order_code',                'field_name': '商品订单号',            },            {                'field': 'goods_name',                'field_name': '商品名称',            },            {                'field': 'model',                'field_name': '型号',            },            {                'field': 'price',                'field_name': '单价',            },            {                'field': 'number',                'field_name': '数量',            },            {                'field': 'amount',                'field_name': '货款',            },            {                'field': 'commission',                'field_name': '佣金',            },        ],        "self.action=='unstatement'": [            {                'field': 'order_date',                'field_name': '单据日期',            },            {                'field': 'type',                'field_name': '单据类型',            },            {                'field': 'order_code',                'field_name': '商品订单号',            },            {                'field': 'goods_name',                'field_name': '商品名称',            },            {                'field': 'model',                'field_name': '型号',            },            {                'field': 'price',                'field_name': '单价',            },            {                'field': 'number',                'field_name': '数量',            },            {                'field': 'amount',                'field_name': '货款',            },            {                'field': 'commission',                'field_name': '佣金',            },        ],    },    "StatementDetaiExlViewset": {        "self.action=='statement'": [            {                'field': 'limit',                'field_name': '对账月份',            },            {                'field': 'term',                'field_name': '对账周期',            },            {                'field': 'code',                'field_name': '对账单单号',            },            {                'field': 'order_date',                'field_name': '单据日期',            },            {                'field': 'type',                'field_name': '单据类型',            },            {                'field': 'order_code',                'field_name': '商品订单号',            },            {                'field': 'goods_name',                'field_name': '商品名称',            },            {                'field': 'model',                'field_name': '型号',            },            {                'field': 'price',                'field_name': '单价',            },            {                'field': 'number',                'field_name': '数量',            },            {                'field': 'amount',                'field_name': '货款',            },            {                'field': 'commission',                'field_name': '佣金',            },        ],        "self.action=='unstatement'": [            {                'field': 'order_date',                'field_name': '单据日期',            },            {                'field': 'type',                'field_name': '单据类型',            },            {                'field': 'order_code',                'field_name': '商品订单号',            },            {                'field': 'goods_name',                'field_name': '商品名称',            },            {                'field': 'model',                'field_name': '型号',            },            {                'field': 'price',                'field_name': '单价',            },            {                'field': 'number',                'field_name': '数量',            },            {                'field': 'amount',                'field_name': '货款',            },            {                'field': 'commission',                'field_name': '佣金',            },        ],    },    "StatementSupViewset": {        "self.action=='retrieve'": {            "title": [                {                    'field': 'code',                    'field_name': '对账单单号',                },                {                    'field': 'month',                    'field_name': '对账月份',                },                {                    'field': 'supplier_name',                    'field_name': '对账对象',                },                {                    'field': 'cycle',                    'field_name': '对账周期',                },                {                    'field': 'status',                    'field_name': '对账状态',                    'func': lambda x: [item[1] for item in STATEMENT_STATUS if int(x) == item[0]][0]                },                {                    'field': 'commission_total',                    'field_name': '佣金合计',                },                {                    'field': 'goods_total',                    'field_name': '货款合计',                },            ],            "detail": [                {                    'field': 'date',                    'field_name': '单据日期',                },                {                    'field': 'typename',                    'field_name': '单据类型',                },                {                    'field': 'order_code',                    'field_name': '商品订单号',                },                {                    'field': 'goods_name',                    'field_name': '商品名称',                },                {                    'field': 'model',                    'field_name': '型号',                },                {                    'field': 'price',                    'field_name': '单价',                },                {                    'field': 'number',                    'field_name': '数量',                },                {                    'field': 'amount',                    'field_name': '货款',                },                {                    'field': 'commission',                    'field_name': '佣金',                },            ],        }    },    "CommissionTicket":{        "is_type==1":[            {                'field': 'supplier_name',                'field_name': '开票对象',            },            {                'field': 'limit',                'field_name': '对账月份',            },            {                'field': 'term',                'field_name': '对账周期',            },            {                'field': 'code',                'field_name': '对账单单号',            },            {                'field': 'date',                'field_name': '单据日期',            },            {                'field': 'typename',                'field_name': '单据类型',            },            {                'field': 'order_code',                'field_name': '商品订单号',            },            {                'field': 'goods_name',                'field_name': '商品名称',            },            {                'field': 'model',                'field_name': '型号',            },            {                'field': 'price',                'field_name': '单价',            },            {                'field': 'number',                'field_name': '数量',            },            {                'field': 'amount',                'field_name': '货款',            },            {                'field': 'commission',                'field_name': '佣金',            },            {                'field': 'ticket_amount',                'field_name': '可开票金额',            },        ],        "is_type==2":[            {                'field': 'supplier_name',                'field_name': '开票对象',            },            {                'field': 'receipt_no',                'field_name': '发票号码',            },            {                'field': 'limit',                'field_name': '对账月份',            },            {                'field': 'term',                'field_name': '对账周期',            },            {                'field': 'code',                'field_name': '对账单单号',            },            {                'field': 'date',                'field_name': '单据日期',            },            {                'field': 'typename',                'field_name': '单据类型',            },            {                'field': 'order_code',                'field_name': '商品订单号',            },            {                'field': 'goods_name',                'field_name': '商品名称',            },            {                'field': 'model',                'field_name': '型号',            },            {                'field': 'price',                'field_name': '单价',            },            {                'field': 'number',                'field_name': '数量',            },            {                'field': 'amount',                'field_name': '货款',            },            {                'field': 'commission',                'field_name': '佣金',            },            {                'field': 'tot_amount',                'field_name': '累计开票',            },        ],    },    "CommissionSupTicket": {        "is_type==1": [            {                'field': 'supplier_name',                'field_name': '开票对象',            },            {                'field': 'limit',                'field_name': '对账月份',            },            {                'field': 'term',                'field_name': '对账周期',            },            {                'field': 'code',                'field_name': '对账单单号',            },            {                'field': 'date',                'field_name': '单据日期',            },            {                'field': 'typename',                'field_name': '单据类型',            },            {                'field': 'order_code',                'field_name': '商品订单号',            },            {                'field': 'goods_name',                'field_name': '商品名称',            },            {                'field': 'model',                'field_name': '型号',            },            {                'field': 'price',                'field_name': '单价',            },            {                'field': 'number',                'field_name': '数量',            },            {                'field': 'amount',                'field_name': '货款',            },            {                'field': 'commission',                'field_name': '佣金',            },            {                'field': 'ticket_amount',                'field_name': '可开票金额',            },        ],        "is_type==2": [            {                'field': 'supplier_name',                'field_name': '开票对象',            },            {                'field': 'receipt_no',                'field_name': '发票号码',            },            {                'field': 'limit',                'field_name': '对账月份',            },            {                'field': 'term',                'field_name': '对账周期',            },            {                'field': 'code',                'field_name': '对账单单号',            },            {                'field': 'date',                'field_name': '单据日期',            },            {                'field': 'typename',                'field_name': '单据类型',            },            {                'field': 'order_code',                'field_name': '商品订单号',            },            {                'field': 'goods_name',                'field_name': '商品名称',            },            {                'field': 'model',                'field_name': '型号',            },            {                'field': 'price',                'field_name': '单价',            },            {                'field': 'number',                'field_name': '数量',            },            {                'field': 'amount',                'field_name': '货款',            },            {                'field': 'commission',                'field_name': '佣金',            },            {                'field': 'tot_amount',                'field_name': '累计开票',            },        ],    },    "SettlementViewset":{        "self.action=='list'": [            {                'field': 'supplier_name',                'field_name': '结算对象',            },            {                'field': 'limit',                'field_name': '对账月份',            },            {                'field': 'term',                'field_name': '对账周期',            },            {                'field': 'code',                'field_name': '对账单单号',            },            {                'field': 'status',                'field_name': '对方开票状态',            },            {                'field': 'url_number',                'field_name': '附件数',            },            {                'field': 'confirm_amount',                'field_name': '货款合计',            },            {                'field': 'settlement_amount',                'field_name': '待结算金额',            },            {                'field': 'pay_amount',                'field_name': '本次实付金额',            },        ],        "self.action=='retrieve'":[                {                    'field': 'code',                    'field_name': '对账单单号',                },                {                    'field': 'date',                    'field_name': '单据日期',                },                {                    'field': 'typename',                    'field_name': '单据类型',                },                {                    'field': 'order_code',                    'field_name': '商品订单号',                },                {                    'field': 'goods_name',                    'field_name': '商品名称',                },                {                    'field': 'model',                    'field_name': '型号',                },                {                    'field': 'price',                    'field_name': '单价',                },                {                    'field': 'number',                    'field_name': '数量',                },                {                    'field': 'amount',                    'field_name': '货款',                },                {                    'field': 'commission',                    'field_name': '佣金',                },        ],        "self.action=='paylist'": [            {                'field': 'supplier_name',                'field_name': '付款对象',            },            {                'field': 'paycode',                'field_name': '收款单号',            },            {                'field': 'paydate',                'field_name': '付款日期',            },            {                'field': 'code',                'field_name': '对账单单号',            },            {                'field': 'pay_amount',                'field_name': '付款金额',            },        ],    },    "SettlementCommissionViewset": {        "self.action=='list'": [            {                'field': 'supplier_name',                'field_name': '结算对象',            },            {                'field': 'limit',                'field_name': '对账月份',            },            {                'field': 'term',                'field_name': '对账周期',            },            {                'field': 'code',                'field_name': '对账单单号',            },            {                'field': 'confirm_amount',                'field_name': '货款合计',            },            {                'field': 'confirm_commission',                'field_name': '佣金合计',            },            {                'field': 'settlement_amount',                'field_name': '待结算金额',            },        ],        "self.action=='retrieve'": [            {                'field': 'code',                'field_name': '对账单单号',            },            {                'field': 'date',                'field_name': '单据日期',            },            {                'field': 'typename',                'field_name': '单据类型',            },            {                'field': 'order_code',                'field_name': '商品订单号',            },            {                'field': 'goods_name',                'field_name': '商品名称',            },            {                'field': 'model',                'field_name': '型号',            },            {                'field': 'price',                'field_name': '单价',            },            {                'field': 'number',                'field_name': '数量',            },            {                'field': 'amount',                'field_name': '货款',            },            {                'field': 'commission',                'field_name': '佣金',            },        ],        "self.action=='paylist'": [            {                'field': 'supplier_name',                'field_name': '付款对象',            },            {                'field': 'paycode',                'field_name': '收款单号',            },            {                'field': 'paydate',                'field_name': '付款日期',            },            {                'field': 'code',                'field_name': '对账单单号',            },            {                'field': 'pay_amount',                'field_name': '收款金额',            },        ],    },    "SettlementCommissionSupViewset": {        "self.action=='list'": [            {                'field': 'supplier_name',                'field_name': '结算对象',            },            {                'field': 'limit',                'field_name': '对账月份',            },            {                'field': 'term',                'field_name': '对账周期',            },            {                'field': 'code',                'field_name': '对账单单号',            },            {                'field': 'confirm_amount',                'field_name': '货款合计',            },            {                'field': 'confirm_commission',                'field_name': '佣金合计',            },            {                'field': 'settlement_amount',                'field_name': '待结算金额',            },            {                'field': 'pay_amount',                'field_name': '本次实付金额',            },        ],        "self.action=='retrieve'": [            {                'field': 'code',                'field_name': '对账单单号',            },            {                'field': 'date',                'field_name': '单据日期',            },            {                'field': 'typename',                'field_name': '单据类型',            },            {                'field': 'order_code',                'field_name': '商品订单号',            },            {                'field': 'goods_name',                'field_name': '商品名称',            },            {                'field': 'model',                'field_name': '型号',            },            {                'field': 'price',                'field_name': '单价',            },            {                'field': 'number',                'field_name': '数量',            },            {                'field': 'amount',                'field_name': '货款',            },            {                'field': 'commission',                'field_name': '佣金',            },        ],        "self.action=='paylist'": [            {                'field': 'supplier_name',                'field_name': '付款对象',            },            {                'field': 'paycode',                'field_name': '收款单号',            },            {                'field': 'paydate',                'field_name': '付款日期',            },            {                'field': 'code',                'field_name': '对账单单号',            },            {                'field': 'pay_amount',                'field_name': '收款金额',            },        ],    },    "SettlementSupViewset": {        "self.action=='list'": [            {                'field': 'supplier_name',                'field_name': '结算对象',            },            {                'field': 'limit',                'field_name': '对账月份',            },            {                'field': 'term',                'field_name': '对账周期',            },            {                'field': 'code',                'field_name': '对账单单号',            },            {                'field': 'confirm_amount',                'field_name': '货款合计',            },            {                'field': 'confirm_commission',                'field_name': '佣金合计',            },            {                'field': 'settlement_amount',                'field_name': '待结算金额',            },        ],        "self.action=='retrieve'": [            {                'field': 'code',                'field_name': '对账单单号',            },            {                'field': 'date',                'field_name': '单据日期',            },            {                'field': 'typename',                'field_name': '单据类型',            },            {                'field': 'order_code',                'field_name': '商品订单号',            },            {                'field': 'goods_name',                'field_name': '商品名称',            },            {                'field': 'model',                'field_name': '型号',            },            {                'field': 'price',                'field_name': '单价',            },            {                'field': 'number',                'field_name': '数量',            },            {                'field': 'amount',                'field_name': '货款',            },            {                'field': 'commission',                'field_name': '佣金',            },        ],        "self.action=='paylist'": [            {                'field': 'supplier_name',                'field_name': '收款对象',            },            {                'field': 'paycode',                'field_name': '收款单号',            },            {                'field': 'paydate',                'field_name': '付款日期',            },            {                'field': 'code',                'field_name': '对账单单号',            },            {                'field': 'pay_amount',                'field_name': '收款金额',            },        ],    },}